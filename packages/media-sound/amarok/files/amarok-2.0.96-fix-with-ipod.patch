Source: Upstream
Upstream: Yes
Reason: Fix WITH_IPOD logic

From 7b82f00c53030707aab00f48ab44939b17c665e1 Mon Sep 17 00:00:00 2001
From: mitchell <mitchell@283d02a7-25f6-0310-bc7c-ecb5cbfe19da>
Date: Fri, 15 May 2009 17:44:42 +0000
Subject: [PATCH] Don't use macro_optional for iPods as cmake logic breaks down.

git-svn-id: svn://anonsvn.kde.org/home/kde/trunk/extragear/multimedia/amarok@968430 283d02a7-25f6-0310-bc7c-ecb5cbfe19da
---
 CMakeLists.txt |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 921e111..c5feade 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -8,6 +8,7 @@ set( CMAKE_MODULE_PATH    ${CMAKE_MODULE_PATH}
 option(WITH_UTILITIES "Enable building of utilities" ON)
 option(WITH_PLAYER "Enable building of main Amarok player" ON)
 option(WITH_MP3TUNES "Enable mp3tunes in the Amarok player, requires multiple extra dependencies" ON)
+option(WITH_IPOD "Enable iPod integration" ON)
 
 include(CheckLibraryExists)
 check_library_exists(dl dlopen "" LIBDL_FOUND)
@@ -53,7 +54,15 @@ if( WITH_PLAYER )
     macro_optional_find_package(Strigi)
     macro_log_feature( STRIGI_FOUND "strigi" "Index metadata of files" "http://strigi.sourceforge.net" TRUE "" "" )
 
-    macro_optional_find_package(Ipod)
+    if (WITH_IPOD})
+      FIND_PACKAGE(Ipod)
+    else (WITH_IPOD)
+      set(IPOD_FOUND)
+      set(IPOD_INCLUDE_DIR)
+      set(IPOD_INCLUDES)
+      set(IPOD_LIBRARY)
+      set(IPOD_LIBRARIES)
+    endif (WITH_IPOD)
     if(IPOD_FOUND)
         macro_ensure_version("0.7.0" ${IPOD_VERSION} IPOD_0_7)
     endif(IPOD_FOUND)
-- 
1.6.3.1

