Source: Bo Ã˜rsted Andresen
Upstream: No.
Reason: Fix automagic dependencies.

From e67a154a942ba81e586b496d15f6c4067e59e003 Mon Sep 17 00:00:00 2001
From: Bernd Steinhauser <berniyh@exherbo.org>
Date: Tue, 14 Jun 2011 22:38:36 +0200
Subject: [PATCH] Crude fix for automagic dependencies.

---
 kexi/kexidb/drivers/CMakeLists.txt      |   18 +++++++++---------
 krita/plugins/extensions/CMakeLists.txt |   12 ++++++------
 2 files changed, 15 insertions(+), 15 deletions(-)

diff --git a/kexi/kexidb/drivers/CMakeLists.txt b/kexi/kexidb/drivers/CMakeLists.txt
index 9e48942..3d3694d 100644
--- a/kexi/kexidb/drivers/CMakeLists.txt
+++ b/kexi/kexidb/drivers/CMakeLists.txt
@@ -6,30 +6,30 @@ IF (SQLITE_FOUND)
   add_subdirectory( sqlite )
 ENDIF (SQLITE_FOUND)
 
-INCLUDE (FindMySQL)
+macro_optional_find_package(MySQL)
 IF (MYSQL_FOUND)
    add_subdirectory( mySQL )
 ENDIF (MYSQL_FOUND)
 
 
-INCLUDE (FindPostgreSQL)
-
 set (PQXX_MIN_VERSION "3.0.0")
 set (PQXX_MAX_VERSION "4.0.0")
 
 macro_optional_find_package(PostgreSQL)
-pkg_check_modules (PQXX libpqxx)
 
-IF (POSTGRESQL_FOUND AND PQXX_FOUND AND PQXX_VERSION VERSION_GREATER PQXX_MIN_VERSION AND PQXX_VERSION VERSION_LESS PQXX_MAX_VERSION)
-   add_subdirectory( pqxx )
-ENDIF (POSTGRESQL_FOUND AND PQXX_FOUND AND PQXX_VERSION VERSION_GREATER PQXX_MIN_VERSION AND PQXX_VERSION VERSION_LESS PQXX_MAX_VERSION)
+IF (POSTGRESQL_FOUND)
+   pkg_check_modules (PQXX libpqxx)
+   IF (PQXX_FOUND AND PQXX_VERSION VERSION_GREATER PQXX_MIN_VERSION AND PQXX_VERSION VERSION_LESS PQXX_MAX_VERSION)
+      add_subdirectory( pqxx )
+   ENDIF (PQXX_FOUND AND PQXX_VERSION VERSION_GREATER PQXX_MIN_VERSION AND PQXX_VERSION VERSION_LESS PQXX_MAX_VERSION)
+ENDIF (POSTGRESQL_FOUND)
 
-INCLUDE(FindFreeTDS)
+macro_optional_find_package(FreeTDS)
 IF (FREETDS_FOUND)
    add_subdirectory(sybase)
 ENDIF (FREETDS_FOUND)
 
-INCLUDE(FindXBase)
+macro_optional_find_package(XBase)
 IF(XBASE_FOUND)
    add_subdirectory(xbase)
 ENDIF(XBASE_FOUND)
diff --git a/krita/plugins/extensions/CMakeLists.txt b/krita/plugins/extensions/CMakeLists.txt
index 8d00486..0bd8418 100644
--- a/krita/plugins/extensions/CMakeLists.txt
+++ b/krita/plugins/extensions/CMakeLists.txt
@@ -25,13 +25,13 @@ if(OPENCTL_FOUND AND OPENEXR_FOUND)
   add_subdirectory( painterlyframework )
 endif(OPENCTL_FOUND AND OPENEXR_FOUND)
 
-find_package(OpenShiva)
-find_package(QtShiva )
+macro_optional_find_package(OpenShiva)
+macro_optional_find_package(QtShiva )
 
-if(HAVE_OPENSHIVA AND HAVE_QTSHIVA)
+if(OPENSHIVA_FOUND AND QTSHIVA_FOUND)
  add_subdirectory(shiva)
-endif(HAVE_OPENSHIVA AND HAVE_QTSHIVA)
+endif(OPENSHIVA_FOUND AND QTSHIVA_FOUND)
 
-macro_log_feature(HAVE_OPENSHIVA "OpenShiva" "OpenShiva interpreter for the Shiva Kernel Language (part of OpenGTL)" "http://www.opengtl.org" FALSE "" "Required for Shiva based Generators and Filters")
-macro_log_feature(HAVE_QTSHIVA "QtShiva" "Qt bindings for the OpenShiva interpreter (part of libQtGTL)" "http://www.opengtl.org" FALSE "" "Required for Shiva based Generators and Filters")
+macro_log_feature(OPENSHIVA_FOUND "OpenShiva" "OpenShiva interpreter for the Shiva Kernel Language (part of OpenGTL)" "http://www.opengtl.org" FALSE "" "Required for Shiva based Generators and Filters")
+macro_log_feature(QTSHIVA_FOUND "QtShiva" "Qt bindings for the OpenShiva interpreter (part of libQtGTL)" "http://www.opengtl.org" FALSE "" "Required for Shiva based Generators and Filters")
 
-- 
1.7.7.4

