# Copyright 2009, 2010, 2012 Ingmar Vanhassel
# Copyright 2014 Heiko Becker <heirecka@exherbo.org>
# Distributed under the terms of the GNU General Public License v2

if ever at_least 4.96.0 ; then
    require frameworks

    SLOT="5"
else
    require cmake [ api=2 ]

    DOWNLOADS="mirror://kde/stable/${PN}/${PNV}.tar.bz2"
    SLOT="0"
fi

SUMMARY="A Qt library to access the api of Open Collaboration Services servers"
HOMEPAGE="http://www.kde.org"

LICENCES="LGPL-2.1"
ever at_least 4.97.0 || \
    MYOPTIONS="qt5 [[ description = [ Build against Qt5 instead of Qt4 (experimental) ] ]]"

DEPENDENCIES=""

if ! ever at_least 4.97.0 ; then
    DEPENDENCIES+="
        build:
            qt5? ( kde/extra-cmake-modules[>=0.0.6] )
        build+run:
            qt5? ( x11-libs/qtbase:5 )
           !qt5? ( x11-libs/qt:4[>=4.7.0] )
    "
    CMAKE_SRC_CONFIGURE_OPTIONS+=( '!qt5 QT4_BUILD' )
    CMAKE_SRC_CONFIGURE_PARAMS+=( -DATTICA_ENABLE_TESTS:BOOL=TRUE )
fi

BUGS_TO="kde@exherbo.org"

CMAKE_SRC_CONFIGURE_PARAMS+=( -DATTICA_STATIC_BUILD:BOOL=FALSE )

