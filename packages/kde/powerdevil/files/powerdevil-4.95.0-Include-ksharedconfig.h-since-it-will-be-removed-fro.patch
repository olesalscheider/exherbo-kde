Upstream: yes

From a83d9c34c756424f45707c89b96685a3434fef06 Mon Sep 17 00:00:00 2001
From: David Faure <faure@kde.org>
Date: Sat, 29 Mar 2014 09:05:08 +0100
Subject: [PATCH 1/2] Include ksharedconfig.h (since it will be removed from
 kpluginfactory.h)

---
 powerdevil/daemon/actions/bundled/brightnesscontrolconfig.cpp         | 2 ++
 powerdevil/daemon/actions/bundled/dimdisplayconfig.cpp                | 1 +
 powerdevil/daemon/actions/bundled/handlebuttoneventsconfig.cpp        | 1 +
 powerdevil/daemon/actions/bundled/keyboardbrightnesscontrolconfig.cpp | 1 +
 powerdevil/daemon/actions/bundled/runscriptconfig.cpp                 | 2 ++
 powerdevil/daemon/actions/bundled/suspendsessionconfig.cpp            | 1 +
 powerdevil/daemon/actions/dpms/powerdevildpmsaction.cpp               | 1 +
 powerdevil/daemon/actions/dpms/powerdevildpmsactionconfig.cpp         | 1 +
 powerdevil/daemon/backends/hal/powerdevilhalbackend.cpp               | 1 +
 powerdevil/daemon/backends/upower/powerdevilupowerbackend.cpp         | 1 +
 powerdevil/daemon/kdedpowerdevil.cpp                                  | 1 +
 powerdevil/kcmodule/activities/activitypage.cpp                       | 1 +
 powerdevil/kcmodule/global/GeneralPage.cpp                            | 1 +
 powerdevil/kcmodule/profiles/EditPage.cpp                             | 1 +
 14 files changed, 16 insertions(+)

diff --git a/powerdevil/daemon/actions/bundled/brightnesscontrolconfig.cpp b/powerdevil/daemon/actions/bundled/brightnesscontrolconfig.cpp
index a3853d9..b27ec57 100644
--- a/powerdevil/daemon/actions/bundled/brightnesscontrolconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/brightnesscontrolconfig.cpp
@@ -24,6 +24,8 @@
 #include <QSlider>
 
 #include <KPluginFactory>
+#include <KSharedConfig>
+#include <KConfig>
 #include <KLocalizedString>
 
 K_PLUGIN_FACTORY(PowerDevilBrightnessControlConfigFactory, registerPlugin<PowerDevil::BundledActions::BrightnessControlConfig>(); )
diff --git a/powerdevil/daemon/actions/bundled/dimdisplayconfig.cpp b/powerdevil/daemon/actions/bundled/dimdisplayconfig.cpp
index 4d6c063..fb66d34 100644
--- a/powerdevil/daemon/actions/bundled/dimdisplayconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/dimdisplayconfig.cpp
@@ -24,6 +24,7 @@
 
 #include <KIntSpinBox>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KLocalizedString>
 
 K_PLUGIN_FACTORY(PowerDevilDimDisplayConfigFactory, registerPlugin<PowerDevil::BundledActions::DimDisplayConfig>(); )
diff --git a/powerdevil/daemon/actions/bundled/handlebuttoneventsconfig.cpp b/powerdevil/daemon/actions/bundled/handlebuttoneventsconfig.cpp
index 74e4777..8e9cd6c 100644
--- a/powerdevil/daemon/actions/bundled/handlebuttoneventsconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/handlebuttoneventsconfig.cpp
@@ -27,6 +27,7 @@
 
 #include <KLocalizedString>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KComboBox>
 #include <KIcon>
 
diff --git a/powerdevil/daemon/actions/bundled/keyboardbrightnesscontrolconfig.cpp b/powerdevil/daemon/actions/bundled/keyboardbrightnesscontrolconfig.cpp
index 84d5afc..0c27ef8 100644
--- a/powerdevil/daemon/actions/bundled/keyboardbrightnesscontrolconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/keyboardbrightnesscontrolconfig.cpp
@@ -24,6 +24,7 @@
 #include <QSlider>
 
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KLocalizedString>
 
 K_PLUGIN_FACTORY(PowerDevilKeyboardBrightnessControlConfigFactory, registerPlugin<PowerDevil::BundledActions::KeyboardBrightnessControlConfig>(); )
diff --git a/powerdevil/daemon/actions/bundled/runscriptconfig.cpp b/powerdevil/daemon/actions/bundled/runscriptconfig.cpp
index 896f617..244f360 100644
--- a/powerdevil/daemon/actions/bundled/runscriptconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/runscriptconfig.cpp
@@ -27,6 +27,8 @@
 #include <KComboBox>
 #include <KIntSpinBox>
 #include <KPluginFactory>
+#include <KSharedConfig>
+#include <KConfig>
 
 K_PLUGIN_FACTORY(PowerDevilRunScriptConfigFactory, registerPlugin<PowerDevil::BundledActions::RunScriptConfig>(); )
 
diff --git a/powerdevil/daemon/actions/bundled/suspendsessionconfig.cpp b/powerdevil/daemon/actions/bundled/suspendsessionconfig.cpp
index cbd7855..019b5ad 100644
--- a/powerdevil/daemon/actions/bundled/suspendsessionconfig.cpp
+++ b/powerdevil/daemon/actions/bundled/suspendsessionconfig.cpp
@@ -28,6 +28,7 @@
 #include <KIntSpinBox>
 #include <KLocalizedString>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KIcon>
 #include "suspendsession.h"
 
diff --git a/powerdevil/daemon/actions/dpms/powerdevildpmsaction.cpp b/powerdevil/daemon/actions/dpms/powerdevildpmsaction.cpp
index c7c1516..be079f4 100644
--- a/powerdevil/daemon/actions/dpms/powerdevildpmsaction.cpp
+++ b/powerdevil/daemon/actions/dpms/powerdevildpmsaction.cpp
@@ -29,6 +29,7 @@
 #include <KConfigGroup>
 #include <KDebug>
 #include <KPluginFactory>
+#include <KSharedConfig>
 
 #include <X11/Xmd.h>
 #include <X11/X.h>
diff --git a/powerdevil/daemon/actions/dpms/powerdevildpmsactionconfig.cpp b/powerdevil/daemon/actions/dpms/powerdevildpmsactionconfig.cpp
index d45648b..4d96273 100644
--- a/powerdevil/daemon/actions/dpms/powerdevildpmsactionconfig.cpp
+++ b/powerdevil/daemon/actions/dpms/powerdevildpmsactionconfig.cpp
@@ -22,6 +22,7 @@
 #include <KIntSpinBox>
 #include <KLocalizedString>
 #include <KPluginFactory>
+#include <KSharedConfig>
 
 K_PLUGIN_FACTORY(PowerDevilDPMSConfigFactory, registerPlugin<PowerDevilDPMSActionConfig>();)
 
diff --git a/powerdevil/daemon/backends/hal/powerdevilhalbackend.cpp b/powerdevil/daemon/backends/hal/powerdevilhalbackend.cpp
index 726261d..42a65c5 100644
--- a/powerdevil/daemon/backends/hal/powerdevilhalbackend.cpp
+++ b/powerdevil/daemon/backends/hal/powerdevilhalbackend.cpp
@@ -31,6 +31,7 @@
 #include <Solid/GenericInterface>
 #include <Solid/AcAdapter>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <QtCore/QTimer>
 
 PowerDevilHALBackend::PowerDevilHALBackend(QObject* parent)
diff --git a/powerdevil/daemon/backends/upower/powerdevilupowerbackend.cpp b/powerdevil/daemon/backends/upower/powerdevilupowerbackend.cpp
index 51d2316..d38a28f 100644
--- a/powerdevil/daemon/backends/upower/powerdevilupowerbackend.cpp
+++ b/powerdevil/daemon/backends/upower/powerdevilupowerbackend.cpp
@@ -28,6 +28,7 @@
 #include <KDebug>
 #include <kauthexecutejob.h>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KAuth/Action>
 
 #include "xrandrxcbhelper.h"
diff --git a/powerdevil/daemon/kdedpowerdevil.cpp b/powerdevil/daemon/kdedpowerdevil.cpp
index 622d575..060a89c 100644
--- a/powerdevil/daemon/kdedpowerdevil.cpp
+++ b/powerdevil/daemon/kdedpowerdevil.cpp
@@ -34,6 +34,7 @@
 #include <KAboutData>
 #include <KDebug>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KLocalizedString>
 
 K_PLUGIN_FACTORY( PowerDevilFactory,
diff --git a/powerdevil/kcmodule/activities/activitypage.cpp b/powerdevil/kcmodule/activities/activitypage.cpp
index 7f271e7..48e9c6c 100644
--- a/powerdevil/kcmodule/activities/activitypage.cpp
+++ b/powerdevil/kcmodule/activities/activitypage.cpp
@@ -38,6 +38,7 @@
 #include <KIcon>
 #include <KMessageWidget>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KTabWidget>
 #include <KLocalizedString>
 
diff --git a/powerdevil/kcmodule/global/GeneralPage.cpp b/powerdevil/kcmodule/global/GeneralPage.cpp
index c0df82f..d025e42 100644
--- a/powerdevil/kcmodule/global/GeneralPage.cpp
+++ b/powerdevil/kcmodule/global/GeneralPage.cpp
@@ -38,6 +38,7 @@
 
 #include <KNotifyConfigWidget>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KAboutData>
 #include <KLocalizedString>
 
diff --git a/powerdevil/kcmodule/profiles/EditPage.cpp b/powerdevil/kcmodule/profiles/EditPage.cpp
index 06246ce..a674ccb 100644
--- a/powerdevil/kcmodule/profiles/EditPage.cpp
+++ b/powerdevil/kcmodule/profiles/EditPage.cpp
@@ -46,6 +46,7 @@
 #include <KToolBar>
 #include <KAboutData>
 #include <KPluginFactory>
+#include <KSharedConfig>
 #include <KServiceTypeTrader>
 #include <KStandardDirs>
 #include <KLocalizedString>
-- 
1.9.1

