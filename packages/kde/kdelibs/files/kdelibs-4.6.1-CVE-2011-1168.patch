Source: upstream
Upstream: yes, http://quickgit.kde.org/?p=kdelibs.git&a=commit&h=aaa8c42043530f2cc6f4b05abf3819db9790cac0
Reason: fix CVE-2011-1168 - konqueror error pages XSS attack

--- a/khtml/khtml_part.cpp
+++ b/khtml/khtml_part.cpp
@@ -1804,7 +1804,10 @@ void KHTMLPart::htmlError( int errorCode
   stream >> errorName >> techName >> description >> causes >> solutions;
 
   QString url, protocol, datetime;
-  url = Qt::escape( reqUrl.prettyUrl() );
+
+  // This is somewhat confusing, but we have to escape the externally-
+  // controlled URL twice: once for i18n, and once for HTML.
+  url = Qt::escape( Qt::escape( reqUrl.prettyUrl() ) );
   protocol = reqUrl.protocol();
   datetime = KGlobal::locale()->formatDateTime( QDateTime::currentDateTime(),
                                                 KLocale::LongDate );
