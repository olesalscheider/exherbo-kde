Upstream: yes

From 049113e719dd2fc4446d054fa1a3aada330094f0 Mon Sep 17 00:00:00 2001
From: Alex Merry <alex.merry@kde.org>
Date: Sat, 29 Mar 2014 12:10:23 +0000
Subject: [PATCH 2/2] Explicitly declare exported interfaces of libraries

This is (a) generally a good idea, and (b) necessary with CMake
2.8.12.0, which defaults to PRIVATE linkage (when CMP0022 is NEW) if no
keywords are given to target_link_libraries().
---
 khotkeys/libkhotkeysprivate/CMakeLists.txt | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/khotkeys/libkhotkeysprivate/CMakeLists.txt b/khotkeys/libkhotkeysprivate/CMakeLists.txt
index 692f461..8e0f87f 100644
--- a/khotkeys/libkhotkeysprivate/CMakeLists.txt
+++ b/khotkeys/libkhotkeysprivate/CMakeLists.txt
@@ -70,7 +70,8 @@ set(khotkeysprivate_SRCS
 )
 
 add_library(khotkeysprivate SHARED ${khotkeysprivate_SRCS})
-target_link_libraries(khotkeysprivate
+# Not exported, so just make all links PUBLIC
+target_link_libraries(khotkeysprivate PUBLIC
     PW::KWorkspace
     Qt5::X11Extras
     KF5::GlobalAccel
@@ -81,7 +82,7 @@ target_link_libraries(khotkeysprivate
     KF5::KDE4Support
     ${X11_X11_LIB})
 if(X11_XTest_FOUND)
-  target_link_libraries(khotkeysprivate ${X11_XTest_LIB})
+    target_link_libraries(khotkeysprivate PUBLIC ${X11_XTest_LIB})
 endif()
 set_target_properties(khotkeysprivate PROPERTIES VERSION ${GENERIC_LIB_VERSION} SOVERSION ${GENERIC_LIB_SOVERSION})
 install(TARGETS khotkeysprivate ${INSTALL_TARGETS_DEFAULT_ARGS} LIBRARY NAMELINK_SKIP)
-- 
1.9.1

