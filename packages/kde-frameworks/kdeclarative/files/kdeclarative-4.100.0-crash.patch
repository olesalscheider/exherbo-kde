Upstream: yes

From 0f0e3249f4df06ab60b5dbca7953d760ef51888f Mon Sep 17 00:00:00 2001
From: Marco Martin <notmart@gmail.com>
Date: Thu, 5 Jun 2014 13:31:31 +0200
Subject: [PATCH 2/4] crash--

---
 src/kdeclarative/qmlobject.cpp | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/src/kdeclarative/qmlobject.cpp b/src/kdeclarative/qmlobject.cpp
index 7200ba7..029edaf 100644
--- a/src/kdeclarative/qmlobject.cpp
+++ b/src/kdeclarative/qmlobject.cpp
@@ -60,10 +60,6 @@ public:
           component(0),
           delay(false)
     {
-        kdeclarative.setDeclarativeEngine(engine);
-        //binds things like kconfig and icons
-        kdeclarative.setupBindings();
-
         executionEndTimer = new QTimer(q);
         executionEndTimer->setInterval(0);
         executionEndTimer->setSingleShot(true);
@@ -145,6 +141,9 @@ QmlObject::QmlObject(QObject *parent)
       d(new QmlObjectPrivate(this))
 {
     d->engine = new QQmlEngine(this);
+    d->kdeclarative.setDeclarativeEngine(d->engine);
+    //binds things like kconfig and icons
+    d->kdeclarative.setupBindings();
     d->engine->setIncubationController(new QmlObjectIncubationController(0));
 }
 
@@ -158,6 +157,9 @@ QmlObject::QmlObject(QQmlEngine *engine, QObject *parent)
         d->engine = new QQmlEngine(this);
         d->engine->setIncubationController(new QmlObjectIncubationController(0));
     }
+    d->kdeclarative.setDeclarativeEngine(d->engine);
+    //binds things like kconfig and icons
+    d->kdeclarative.setupBindings();
 }
 
 QmlObject::~QmlObject()
-- 
2.0.0

