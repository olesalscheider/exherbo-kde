Upstream: sent a mail to dev

From 4a303156712a033deca925238d0137861c6ea610 Mon Sep 17 00:00:00 2001
From: Heiko Becker <heirecka@exherbo.org>
Date: Fri, 23 May 2014 12:04:30 +0200
Subject: [PATCH] Install headers similar as other frameworks

---
 CMakeLists.txt     |  1 +
 src/CMakeLists.txt | 26 ++++++++++++++++----------
 2 files changed, 17 insertions(+), 10 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index cf9c5c3..6229356 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -12,6 +12,7 @@ include(ECMAddTests)
 include(FeatureSummary)
 include(GenerateExportHeader)
 include(ECMSetupVersion)
+include(ECMGenerateHeaders)
 
 set(KF5_VERSION "4.97.0")
 set(REQUIRED_QT_VERSION "5.2.0")
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index d5a5358..dece639 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -22,7 +22,20 @@ set_target_properties(KF5KFileMetadata PROPERTIES
     SOVERSION ${KFILEMETADATA_SOVERSION}
     EXPORT_NAME FileMetaData
 )
-target_include_directories(KF5KFileMetadata INTERFACE "$<INSTALL_INTERFACE:${INCLUDE_INSTALL_DIR}>")
+target_include_directories(KF5KFileMetadata INTERFACE "$<INSTALL_INTERFACE:${KF5_INCLUDE_INSTALL_DIR}/KFileMetaData>")
+
+ecm_generate_headers(KF5KFileMetaData_HEADERS
+    HEADER_NAMES
+    ExtractionResult
+    ExtractorPlugin
+    ExtractorPluginManager
+    Properties
+    PropertyInfo
+    Types
+    TypeInfo
+
+    REQUIRED_HEADERS KF5KFileMetaData_HEADERS
+)
 
 install(TARGETS KF5KFileMetadata ${INSTALL_TARGETS_DEFAULT_ARGS})
 
@@ -35,16 +48,9 @@ install(EXPORT KFileMetaDataTargets
         FILE KF5KFileMetaDataTargetsWithPrefix.cmake)
 
 install(FILES
-    extractionresult.h
-    extractorplugin.h
-    extractorpluginmanager.h
-    properties.h
-    propertyinfo.h
-    types.h
-    typeinfo.h
     ${CMAKE_CURRENT_BINARY_DIR}/kfilemetadata_export.h
-
-    DESTINATION ${INCLUDE_INSTALL_DIR}/KF5KFileMetadata COMPONENT Devel
+    ${KF5KFileMetaData_HEADERS}
+    DESTINATION ${KF5_INCLUDE_INSTALL_DIR}/KFileMetaData COMPONENT Devel
 )
 
 add_subdirectory(extractors)
-- 
1.9.3

